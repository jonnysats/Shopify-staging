{{ 'cart-page.css' | asset_url | stylesheet_tag: preload: true }}
{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
<div class="border-bottom border-light d-none d-lg-block">
	<div class="container-xxl py-4">
		<div class="row">
			<div class="col py-3 gx-lg-6">
				<h1 class="h2 mb-0{% if cart.item_count == 0 %} text-center{% endif %}">{{ 'cart.general.title' | t }}</h1>
			</div>
		</div>
	</div>
</div>
<div class="container-xxl">
	<div class="row py-4 border-bottom border-light d-block d-lg-none">
		<div class="col py-3">
			<h2 class="h2 mb-0{% if cart.item_count == 0 %} text-center{% endif %}">{{ 'cart.general.title' | t }}</h2>
		</div>
	</div>
	<div class="row{% if cart.item_count == 0 %} d-none{% else %} d-block d-lg-none{% endif %}">
		<div class="col pb-3 pt-4">
			<p class="fs-4 fw-bold text-black mb-0">{{ 'cart.general.cart_items' | t: items: cart.item_count  }}</p>
		</div>
	</div>
	{%- if section.settings.free_shipping_bar_enable == true and section.settings.free_shipping_goal != blank -%}
		<div class="row d-block d-lg-none pb-4">
			<div class="col">
				{%- render 'cart-free-shipping-bar', free_shipping_image: section.settings.free_shipping_image, free_shipping_goal: section.settings.free_shipping_goal, free_shipping_success_message: section.settings.free_shipping_success_message, free_shipping_spent_message: section.settings.free_shipping_spent_message -%}
			</div>
		</div>
	{%- endif -%}
	{%- if cart.item_count > 0 -%}
		<div class="row">
			<div class="col-12 col-md-7 gx-lg-6">
				<div class="row d-none d-lg-block">
					<div class="col py-4">
						<p class="pt-3 pb-2 fs-3 fw-bold text-black mb-0">{{ 'cart.general.cart_items' | t: items: cart.item_count  }}</p>
					</div>
				</div>
				{%- if section.settings.free_shipping_bar_enable == true and section.settings.free_shipping_goal != blank -%}
					<div class="row d-none d-lg-block pb-4">
						<div class="col">
							{%- render 'cart-free-shipping-bar', free_shipping_image: section.settings.free_shipping_image, free_shipping_goal: section.settings.free_shipping_goal, free_shipping_success_message: section.settings.free_shipping_success_message, free_shipping_spent_message: section.settings.free_shipping_spent_message, free_shipping_spent_support_message: section.settings.free_shipping_spent_support_message -%}
						</div>
					</div>
				{%- endif -%}
				<div class="row pb-lg-5">
					<div class="col">
						<div class="items-wrapper border border-light" data-drawer-cart-items>
							{%- 
								render 'drawer-cart-items',
								context: 'cart'
							-%}
						</div>
					</div>
				</div>
			</div>
	
			<!-- ASIDE -->
			<div class="col-12 col-md-5 gx-lg-6 cart-summary pt-4 pb-4">
				<div class="row pt-lg-3">
					<div class="col">
						<p class="fs-3 fw-bold text-black mb-0 pb-4 mb-2 d-none d-lg-block">{{'cart.general.summary' | t }}</p>
						<p class="fs-4 fw-bold text-black mb-0 pb-3 d-block d-lg-none">{{'cart.general.summary' | t }}</p>
						{%- liquid
							assign app_blocks = section.blocks | where: "type", "@app"
						-%}
						{%- if app_blocks.size > 0 -%}
							{%- comment -%} App Blocks {%- endcomment -%}
							<div class="cart-app-blocks pb-4">
								{%- liquid
									for block in section.blocks
										case block.type
											when '@app'
												render block
										endcase
									endfor
								-%}
							</div>
						{%- endif -%}
					</div>
				</div>
				<div class="row pb-2">
					<div class="col">
						<form action="/checkout" method="post" class="needs-validation">
							{%- comment -%} Form update info (HIDDEN) {%- endcomment -%}
							<div class="d-flex justify-content-between d-none">
								<input class="visually-hidden" type="submit" name="update" value="{{ 'cart.general.update' | t }}">
								<input class="btn btn-primary" type="submit" name="checkout" class="button" value="{{ 'cart.general.checkout' | t }}">
							</div>
							{%- comment -%} Subtotal {%- endcomment -%}
							<div class="d-flex justify-content-between align-items-center pb-2 pb-lg-3">
								<div class="d-flex flex-row gap-2 align-items-center">
									<p class="fs-5 fw-medium mb-0">{{ 'cart.general.subtotal' | t }}</p>
								</div>
								<p class="fs-5 fw-medium text-black total-price mb-0">{{ cart.original_total_price | money }}</p>
							</div>
							{%- comment -%} Discounts {%- endcomment -%}
							{%- render 'cart-discounts' -%}
							{%- comment -%} Total {%- endcomment -%}
							<div class="d-flex flex-column pb-2">
								<div class="d-flex justify-content-between">
									<p class="fs-4 fw-bold text-black mb-0">{{ 'cart.general.subtotal' | t }}</p>
									<p class="fs-4 fw-bold text-black mb-0">{{ cart.total_price | money }}</p>	
								</div>
								<p class="mb-0 cart-total-subtitle">{{ 'cart.general.shipping_fees' | t }}</p>
							</div>
							{%- comment -%} Divider {%- endcomment -%}
							 <hr class="cart-divider" />
							{%- comment -%} Delivery Instructions (Cart notes) {%- endcomment -%}
							{%- if section.settings.notes_enabled -%}
								<div class="pb-4 pt-lg-2">
									<label class="cart-notes-label fs-5 fw-medium text-black form-label" for="CartSpecialInstructions">{{ 'cart.general.add_delivery_instructions' | t }}</label>
									<textarea class="cart-delivery-instructions form-control" name="note" placeholder="{{ 'cart.general.enter_message' | t }}" id="CartSpecialInstructions">{{ cart.note }}</textarea>
								</div>
							{%- endif -%}
							{%- comment -%} Terms and conditions {%- endcomment -%}										
							{%- if section.blocks.size > 0 -%}
								{%- for block in section.blocks -%}
									{%- case block.type -%}
										{%- when "content" -%}
											<div class="cart-terms-and-conditions d-flex align-items-center" {{ block.shopify_attributes }} data-checkboxes>
												<input class="form-check-input me-2" type="checkbox" value="" id="checkbox_{{ forloop.index }}" required="required">
												<label class="form-check-label" for="checkbox_{{ forloop.index }}">{{ block.settings.tc_legal }}</label>
												<p class="invalid-feedback">{{ 'cart.general.tc_warning' | t }}</p>
											</div>
									{%- endcase -%}
								{%- endfor -%}
							{%- endif -%}
							{%- comment -%} Submit buttons {%- endcomment -%}
							<div class="d-flex flex-column gap-2 pt-4">
								<button class="btn btn-primary" type="submit" name="{{ 'cart.general.checkout' | t }}">
									<span class="anim-wrapper">
										<span class="initial">{{ 'cart.general.checkout' | t }}</span>
										<span class="end">{{ 'cart.general.checkout' | t }}</span>
									</span>
								</button>
								{%- if content_for_additional_checkout_buttons != blank -%}
									<div class="additional-checkout-buttons py-3">{{ content_for_additional_checkout_buttons }}</div>
								{%- endif -%}
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	{%- else -%}
		{%- comment -%} // Cart empty state // {%- endcomment -%}
		<div class="h-100 w-100 d-flex flex-column justify-content-center align-items-center pt-5 pb-4 pb-lg-3">
			<div class="d-flex flex-column justify-content-center align-items-center">
				{%- if section.settings.cart_empty_image != blank -%}
					{%- render 'responsive-image', image: section.settings.cart_empty_image, wrapper_class: "drawer-cart-empty-image mb-2 pb-1" -%}
				{%- endif -%}
				<p>{{ 'cart.general.empty' | t }}</p>
				<p>{{ 'cart.general.continue_browsing_html' | t }}</p>
			</div>
		</div>
		{%- comment -%}
			Cart no cookies state
			---------------------
			Browser cookies are required to use the cart. If cookies aren't enabled in the
			browser a message is displayed prompting the user to enable them.
		{%- endcomment -%}
		<div class="supports-no-cookies">
			<p>{{ 'cart.general.cookies_required' | t }}</p>
		</div>
	{%- endif -%}
</div>
{%- if cart.item_count > 0 -%}
	<hr class="cart-section-divider d-none m-0 border-black border-opacity-50" />
{%- endif -%}
{% schema %}
{
  "name": "Cart Page",
  "class": "section-cart",
  "tag": "section",
  "settings": [
	{
		"type": "header",
		"content": "Cart Page"
	},
	{
		"type": "image_picker",
		"id": "cart_empty_image",
		"label": "Cart empty image",
		"info": "Displays only when you visit the cart page with 0 products in cart"
	},
	{
	  "type": "checkbox",
	  "id": "notes_enabled",
	  "label": "Activate Note on the Cart Page",
	  "default": true
	},
	{
	  "type": "header",
	  "content": "Free shipping"
	},
	{
		"type": "checkbox",
		"id": "free_shipping_bar_enable",
		"label": "Enable free shipping bar",
		"info": "If 'Goal amount' is not set, the free shipping block will remain hidden.",
		"default": false
	},
	{
		"type": "number",
		"id": "free_shipping_goal",
		"label": "Goal amount",
		"info": "Spent amount customer needs to match or exceed to achieve free shipping."
	},
	{
		"type": "image_picker",
		"id": "free_shipping_image",
		"label": "Featured Image",
	},
	{
		"type": "text",
		"id": "free_shipping_spent_message",
		"label": "Spent message",
		"info": "Message to inform the customer they need to spent more to achieve free shipping. Use the special series of characters '%money%' to place the amount to spent until free shipping."
	},
	{
		"type": "text",
		"id": "free_shipping_spent_support_message",
		"label": "Spent message subtitle",
	},
	{
		"type": "text",
		"id": "free_shipping_success_message",
		"label": "Success message",
		"info": "Success message to inform the customer they achieved free shipping"
	},
	{
		"type": "header",
		"content": "Section Settings"
	},
	{
		"type": "select",
		"id": "padding_amount_top",
		"label": "Top Section Padding",
		"options": [
			{
				"value": "no",
				"label": "None"
			},
			{
				"value": "small",
				"label": "Small"
			},
			{
				"value": "default",
				"label": "Medium (Default)"
			},
			{
				"value": "large",
				"label": "Large"
			},
			{
				"value": "xlarge",
				"label": "Extra Large"
			}
		],
		"default": "default"
	},
	{
		"type": "select",
		"id": "padding_amount_bottom",
		"label": "Bottom Section Padding",
		"options": [
			{
				"value": "no",
				"label": "None"
			},
			{
				"value": "small",
				"label": "Small"
			},
			{
				"value": "default",
				"label": "Medium (Default)"
			},
			{
				"value": "large",
				"label": "Large"
			},
			{
				"value": "xlarge",
				"label": "Extra Large"
			}
		],
		"default": "default"
	}
  ],
  "blocks": [
	{
	  "name": "Legal Agreements",
	  "type": "content",
	  "settings": [
		{
		  "type": "inline_richtext",
		  "id": "tc_legal",
		  "label": "T&C Legal Copy",
		  "default": "I have read and agreed to the Terms & Conditions."
		}
	  ]
	},
	{ "type": "@app" }
  ]
}
{% endschema %}