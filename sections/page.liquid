{%- liquid
	assign page_title_block = section.blocks | where: "type", "page-title" | default: blank
	assign page_content_block = section.blocks | where: "type", "page-content" | default: blank
-%}
{%- if page_content_block != blank or page_title_block != blank -%}
	{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
	{{ 'page-section.css' | asset_url | stylesheet_tag: preload: true }}
	<div class="container">
		{%- if page_title_block != blank -%}
			{%- for block in section.blocks -%}
				{%- case block.type -%}
					{%- when "page-title" -%}
						<div class="row pb-4">
							<div class="col-12 text-{{ block.settings.text_align_mobile }} text-lg-{{ block.settings.text_align_desktop }}">
								{%- if block.settings.is_h1 == true -%}
									<h1>{{ page.title }}</h1>
								{%- else -%}
									<h2 class="h1">{{ page.title }}</h2>
								{%- endif -%}
							</div>
						</div>
				{%- endcase -%}
			{%- endfor -%}
		{%- endif -%}
		{%- assign download_btn = page.metafields.theme.download -%}
		{%- if download_btn != blank -%}
			<div class="row">
				<div class="col-12">
					<div class="btn-wrapper d-flex gap-3 mt-lg-auto pt-2 mb-5">
						<a class="btn btn-primary download-btn d-flex align-items-center justify-content-center" href="{{ download_btn | file_url }}" title="{{ "general.page.download_label" | t | escape }}" download="{{ page.title }}">
							{%- render 'icons' with 'download' -%}
							<span>{{ "general.page.download_label" | t | capitalize }}</span>
						</a>
					</div>
				</div>
			</div>
		{%- endif -%}
		{%- if page_content_block != blank -%}
			<div class="row">
				<div class="col-12">
					<div class="rte">{{ page.content }}</div>
				</div>
			</div>
		{%- endif -%}
	</div>
{%- endif -%}
{% schema %}
{
	"name": "Page",
	"class": "section-page",
	"tag": "section",
	"settings": [
		{
			"type": "header",
			"content": "Page",
			"info": "This section is meant to render the contents of the current page. Use blocks to add the title and page content"
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"blocks": [
		{
			"type": "page-title",
			"name": "Page title",
			"limit": 1,
			"settings": [
				{
					"type": "header",
					"content": "Title",
					"info": "This block renders the current page title"
				},
				{
					"type": "checkbox",
					"id": "is_h1",
					"label": "Show title as H1",
					"info": "If you page already has a main heading coming from a different section, keep this option disabled",
					"default": false
				},
				{
					"type": "select",
					"id": "text_align_desktop",
					"label": "Text align (Desktop)",
					"options": [
						{
							"value": "start",
							"label": "Left"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Right"
						}
					],
					"default": "start"
				},
				{
					"type": "select",
					"id": "text_align_mobile",
					"label": "Text align (Mobile)",
					"options": [
						{
							"value": "start",
							"label": "Left"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Right"
						}
					],
					"default": "start"
				},
			]
		},
		{
			"type": "page-content",
			"name": "Page Content",
			"limit": 1,
			"settings": [
				{
					"type": "header",
					"content": "Content",
					"info": "This block renders the current page content added in Shopify backend CMS"
				},
			]
		},
		{
			"type": "@app"
		}
	],
	"presets": [
		{
			"name": "Page"
		}
	],
	"enabled_on": {
		"templates": ["page"]
	}
}
{% endschema %}