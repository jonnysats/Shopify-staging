{%- if section.settings.collection != blank -%}
	{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
	<script src="{{ 'featured-collection-slider.js' | asset_url }}" defer crossorigin="anonymous"></script>
	{{ 'featured-collection.css' | asset_url | stylesheet_tag: preload: true }}
	{%- if section.settings.bg_color != blank -%}
		<style>
			#shopify-section-{{ section.id }} .section-wrapper { background-color: {{ section.settings.bg_color }}; }
		</style>
	{%- endif -%}
	{%- liquid
		assign flickity_arrows = false
		assign flickity_dots = false
		assign flickity_loop = true
		assign flickity_group_cells = false
		assign flickity_adaptive_height = false
		
		assign link_url = section.settings.collection.url
		if section.settings.url != blank
			assign link_url = section.settings.url
		endif
		
		assign link_copy = 'collections.general.see_all' | t: collection_title: section.settings.collection.title
		if section.settings.link_copy != blank
			assign link_copy = section.settings.link_copy
		endif
	-%}
	<div class="section-wrapper" data-section-id="{{ section.id }}" data-section-type="featuredCollectionSlider">
		<div class="container pt-1 pt-lg-4" data-section-id="{{ section.id }}" data-section-type="featuredProducts">
			{%- liquid
				assign heading = section.settings.collection.title
				if section.settings.heading != blank
					assign heading = section.settings.heading
				endif	
			-%}
			{%- if heading != blank -%}
				<div class="row pb-2 pb-lg-5 mb-3 mb-lg-1 justify-content-{{ section.settings.alignment }}">
					<div class="col col-lg-6 d-flex flex-wrap">
						<div class="copy-wrapper pe-3 pe-lg-0 text-{{ section.settings.alignment }}">
							<h2 class="mb-lg-2">{{ heading }}</h2>
							{%- if section.settings.subheading != blank -%}
								<div class="col{% if section.settings.alignment == "start" %} col-lg-9 pe-lg-3{% endif %}">
									{{ section.settings.subheading }}
								</div>
							{%- endif -%}
						</div>
						<div class="d-block d-lg-none">
							<a class="btn btn-primary text-center m-auto w-100" href="{{ link_url }}" title="{{ link_copy | escape }}">{{ link_copy }}</a>
						</div>
					</div>
				</div>
			{%- endif -%}
			<div class="row product-grid enable-flickity-mobile" data-generic-slider data-arrows="{{ flickity_arrows }}" data-dots="{{ flickity_dots }}" data-loop="{{ flickity_loop }}" data-adaptive-height="{{ flickity_adaptive_height }}" data-group-cells="{{ flickity_group_cells }}">
				{%- liquid
					for product in section.settings.collection.products limit: section.settings.number_of_products
						assign product_grid_classes = "px-custom col-custom col-6 col-md-4 col-lg-3"
						render 'product-grid', product: product, classes: product_grid_classes, col_sm: 2, col_md: 3, col_lg: 4, show_description: false, show_swatches: true
					endfor
				-%}
			</div>
			<div class="row justify-content-center pt-5 mt-2 d-none d-lg-block">
				<div class="col text-center">
					<a class="btn btn-primary text-center m-auto w-100" href="{{ link_url }}" title="{{ link_copy | escape }}">{{ link_copy }}</a>
				</div>
			</div>
			<div class="row mt-4 d-block d-lg-none">
				<div class="col">
					{%- render 'slider-custom-nav-buttons', justify_style: "between" -%}
				</div>
			</div>
		</div>
	</div>
{%- endif -%}
{% schema %}
{
	"name": "Featured collection",
	"tag": "section",
	"class": "section-featured-collection",
	"settings": [
		{
			"type": "header",
			"content": "Collection",
		},
		{
			"type": "collection",
			"id": "collection",
			"label": "Featured collection",
		},
		{
			"type": "select",
			"id": "number_of_products",
			"label": "Number of Products to Display",
			"options": [
				{
					"value": "4",
					"label": "4"
				},
				{
					"value": "8",
					"label": "8"
				},
				{
					"value": "12",
					"label": "12"
				},
				{
					"value": "15",
					"label": "15"
				},
				{
					"value": "18",
					"label": "18"
				},
				{
					"value": "21",
					"label": "21"
				},
				{
					"value": "24",
					"label": "24"
				}
			],
			"default": "8"
		},
		{
			"type": "header",
			"content": "Background",
		},
		{
			"type": "color",
			"id": "bg_color",
			"label": "Overlay Color",
		},
		{
			"type": "header",
			"content": "Content",
		},
		{
			"type": "text",
			"id": "heading",
			"label": "Header",
			"info": "If not defined, will default to featured collection title"
		},
		{
			"type": "inline_richtext",
			"id": "subheading",
			"label": "Subheader"
		},
		{
			"type": "select",
			"id": "alignment",
			"label": "Header alignment",
			"options": [
				{
					"value": "start",
					"label": "Left"
				},
				{
					"value": "center",
					"label": "Center"
				},
				{
					"value": "end",
					"label": "Right"
				}
			],
			"default": "start"
		},
		{
			"type": "text",
			"id": "link_copy",
			"label": "Link copy",
			"info": "If not defined, will default to featured collection title"
		},
		{
			"type": "url",
			"id": "url",
			"label": "Link",
			"info": "If not defined, will default to featured collection URL"
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"presets": [
		{
			"name": "Featured collection"
		}
	]
}
{% endschema %}