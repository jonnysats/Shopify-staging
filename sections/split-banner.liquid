{%- if section.blocks.size > 0 -%}
	{%- liquid
		render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom
		assign lazyload_style = 'lazy'
		comment
		  Check is this is the first section on the page
		endcomment
		assign is_first_section = false
		if section.index == 1
			assign is_first_section = true

			comment
				If first section load image eager
			endcomment
			assign lazyload_style = 'eager'
		endif
	-%}
	{{ 'split-banner.css' | asset_url | stylesheet_tag: preload: is_first_section }}
	<style>
		#shopify-section-{{ section.id }} .img-copy-wrapper, #shopify-section-{{ section.id }} .img-video-wrapper { min-height: {{ section.settings.height_mobile }}; }
		@media (min-width: 992px) {
			#shopify-section-{{ section.id }} .img-copy-wrapper, #shopify-section-{{ section.id }} .img-video-wrapper { min-height: {{ section.settings.height }}; }
		}
	</style>
	<div class="container-fluid px-0 overflow-hidden">
		<div class="row gy-3">
			{%- for block in section.blocks -%}
				{%- if block.settings.image != blank or block.settings.video != blank -%}
					{%- liquid
						comment
							Transform Shopify Text Alignment to BT code (start|center|end)
						endcomment
						assign text_alignment_desktop = block.settings.text_alignment_desktop | replace: 'left', 'start' | replace: 'right', 'end'
						assign text_alignment_mobile = block.settings.text_alignment_mobile | replace: 'left', 'start' | replace: 'right', 'end'

						comment
							Prep the code for the overlay
						endcomment
						if block.settings.overlay_option == 'gradient'
							assign overlay_color = block.settings.overlay_gradient
						else
							assign overlay_color = block.settings.overlay_color
						endif
					-%}
					<div class="col-12 col-lg-6 content-columns" {{ block.shopify_attributes }}>
						{%- if block.settings.video != blank or block.settings.image != blank -%}
							<div class="img-copy-wrapper position-relative{% if section.settings.height_mobile == '100cqw' %} square-sm{% endif %}{% if section.settings.height == '100cqw' %} square-lg{% endif %}">
								<div class="position-relative h-100 d-flex justify-content-{{ block.settings.horizontal_alignment_mobile }} justify-content-lg-{{ block.settings.horizontal_alignment_desktop }} align-items-{{ block.settings.vertical_alignment_mobile }} align-items-lg-{{ block.settings.vertical_alignment_desktop }} p-3 p-lg-5 z-1">
									{%- if block.settings.show_overlay == true -%}<div class="overlay"{% if block.settings.overlay_color != blank and block.settings.overlay_opacity != blank %} style="--overlay-color: {{ overlay_color }}; --overlay-opacity: {{ block.settings.overlay_opacity | divided_by: 100.0 }};"{% endif %}></div>{%- endif -%}
									{%- if block.settings.heading != blank or block.settings.subheading != blank or block.settings.copy != blank or block.settings.btn_link != blank or block.settings.btn_copy != blank -%}
										<div class="copy-wrapper pt-1 pb-lg-2 text-{{ text_alignment_mobile }} text-lg-{{ text_alignment_desktop }} overflow-hidden">
											{%- if block.settings.heading != blank -%}
												<h3 class="h2 mb-0"{% if block.settings.heading_color != blank %} style="color: {{ block.settings.heading_color }};"{% endif %}>{{ block.settings.heading }}</h3>
											{%- endif -%}
											{%- if block.settings.subheading != blank -%}
												<h4{% if block.settings.subheading_color != blank %} style="color: {{ block.settings.subheading_color }};"{% endif %}>{{ block.settings.subheading }}</h4>
											{%- endif -%}
											{%- if block.settings.copy != blank -%}
												<div class="description"{% if block.settings.copy_color != blank %} style="color: {{ block.settings.copy_color }};"{% endif %}>
													{{ block.settings.copy }}
												</div>
											{%- endif -%}
											{%- if block.settings.btn_link != blank and block.settings.btn_copy != blank -%}
												<div class="btn-wrapper">
													<a href="{{ block.settings.btn_link }}" class="btn btn-{{ block.settings.button_style }}" title="{{ block.settings.btn_copy | escape }}">
														<span class="anim-wrapper">
															<span class="initial">{{ block.settings.btn_copy }}</span>
															<span class="end">{{ block.settings.btn_copy }}</span>
														</span>
													</a>
												</div>
											{%- endif -%}
										</div>
									{%- endif -%}
								</div>
								<div class="position-absolute h-100 w-100 top-0 z-n1">
									{%- if block.settings.image_or_video == 'video' and block.settings.video != blank -%}
										{{ block.settings.video | video_tag: autoplay: true, loop: true, muted: true, preload: is_first_section }}
									{%- elsif block.settings.image_or_video == 'image' and block.settings.image != blank -%}
										{%- render 'responsive-bg-image', image: block.settings.image, lazyloading_style: lazyload_style -%}
									{%- endif -%}
								</div>
							</div>
						{%- endif -%}
					</div>
				{%- endif -%}
			{%- endfor -%}
		</div>
	</div>
{%- endif -%}
{% schema %}
{
	"name": "Split Banner",
	"tag": "section",
	"class": "section-split-banner overflow-hidden",
	"settings": [
		{
			"type": "header",
			"content": "Hero Heights"
		},
		{
			"type": "select",
			"id": "height",
			"label": "Hero Height",
			"options": [
				{
					"value": "100cqw",
					"label": "Square"
				},
				{
					"value": "500px",
					"label": "500px"
				},
				{
					"value": "auto",
					"label": "Natural"
				}
			],
			"default": "500px"
		},
		{
			"type": "select",
			"id": "height_mobile",
			"label": "Hero Height (mobile)",
			"options": [
				{
					"value": "100cqw",
					"label": "Square"
				},
				{
					"value": "300px",
					"label": "300px"
				},
				{
					"value": "auto",
					"label": "Natural"
				}
			],
			"default": "300px"
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"blocks": [
		{
			"type": "banner",
			"name": "Banner",
			"settings": [
				{
					"type": "select",
					"id": "image_or_video",
					"label": "Use Image or Video",
					"options": [
						{
							"value": "image",
							"label": "Image"
						},
						{
							"value": "video",
							"label": "Video"
						}
					],
					"default": "image"
				},
				{
					"type": "image_picker",
					"id": "image",
					"label": "Image",
					"visible_if": "{{ block.settings.image_or_video == 'image' }}"
				},
				{
					"type": "video",
					"id": "video",
					"label": "Video",
					"visible_if": "{{ block.settings.image_or_video == 'video' }}"
				},
				{
					"type": "header",
					"content": "Overlay"
				},
				{
					"type": "checkbox",
					"id": "show_overlay",
					"label": "Show Overlay?"
				},
				{
					"type": "select",
					"id": "overlay_option",
					"label": "Overlay Options",
					"options": [
						{
							"value": "gradient",
							"label": "Gradient"
						},
						{
							"value": "color",
							"label": "Single Color"
						}
					],
					"default": "gradient"
				},
				{
					"type": "color_background",
					"id": "overlay_gradient",
					"label": "Overlay Gradient",
					"default": "linear-gradient(180deg, rgba(0, 0, 0, 0) 35%, rgba(0, 0, 0, 0.8) 100%)"
				},
				{
				"type": "color",
				"id": "overlay_color",
				"label": "Hero Overlay Color",
				"default": "#000000"
				},
				{
				"type": "range",
				"id": "overlay_opacity",
				"min": 0,
				"max": 100,
				"step": 10,
				"unit": "%",
				"label": "Opacity",
				"default": 20
				},
				{
					"type": "header",
					"content": "Copy"
				},
				{
					"type": "text",
					"id": "heading",
					"label": "Heading"
				},
				{
					"type": "color",
					"id": "heading_color",
					"label": "Heading Color"
				},
				{
					"type": "text",
					"id": "subheading",
					"label": "Subheading"
				},
				{
					"type": "color",
					"id": "subheading_color",
					"label": "Subheading Color"
				},
				{
					"type": "richtext",
					"id": "copy",
					"label": "Copy"
				},
				{
					"type": "color",
					"id": "copy_color",
					"label": "Copy Color"
				},
				{
					"type": "text",
					"id": "btn_copy",
					"label": "Button Copy"
				},
				{
					"type": "url",
					"id": "btn_link",
					"label": "Button Link"
				},
				{
					"type": "select",
					"id": "button_style",
					"label": "Button Style",
					"options": [
						{
							"value": "primary",
							"label": "Primary"
						},
						{
							"value": "outline-primary",
							"label": "Outline"
						},
						{
							"value": "secondary",
							"label": "Secondary"
						},
						{
							"value": "outline-secondary",
							"label": "Outline Secondary"
						},
						{
							"value": "ternary",
							"label": "Tertiary"
						}
					],
					"default": "primary"
				},
				{
					"type": "header",
					"content": "Desktop Alignment"
				},
				{
					"type": "select",
					"id": "vertical_alignment_desktop",
					"label": "Vertical Alignment",
					"options": [
						{
							"value": "start",
							"label": "Top"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Bottom"
						}
					],
					"default": "end"
				},
				{
					"type": "select",
					"id": "horizontal_alignment_desktop",
					"label": "Horizontal Alignment",
					"options": [
						{
							"value": "start",
							"label": "Left"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Right"
						}
					],
					"default": "start"
				},
				{
					"type": "text_alignment",
					"id": "text_alignment_desktop",
					"label": "Text Alignment",
					"default": "left"
				},
				{
					"type": "header",
					"content": "Mobile Alignment"
				},
				{
					"type": "select",
					"id": "vertical_alignment_mobile",
					"label": "Vertical Alignment (Mobile)",
					"options": [
						{
							"value": "start",
							"label": "Top"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Bottom"
						}
					],
					"default": "center"
				},
				{
					"type": "select",
					"id": "horizontal_alignment_mobile",
					"label": "Horizontal Alignment (Mobile)",
					"options": [
						{
							"value": "start",
							"label": "Left"
						},
						{
							"value": "center",
							"label": "Center"
						},
						{
							"value": "end",
							"label": "Right"
						}
					],
					"default": "center"
				},
				{
					"type": "text_alignment",
					"id": "text_alignment_mobile",
					"label": "Text Alignment (Mobile)",
					"default": "center"
				}
			]
		}
	],
	"presets": [
		{
			"name": "Split Banner"
		}
	]
}
{% endschema %}