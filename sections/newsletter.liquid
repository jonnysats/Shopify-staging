{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
{%- unless section.settings.list_id == blank -%}
<script src="{{ 'newsletter.js' | asset_url }}" defer crossorigin="anonymous"></script>
<div class="container" data-section-id="{{ section.id }}" data-section-type="newsletter">
	<div class="row row-cols-1 row-cols-lg-2 gy-3 newsletter-wrapper">
		<div class="col pe-lg-4 pe-xl-7">
			{%- if section.settings.heading != blank -%}
				<h2 class="mb-lg-4">{{ section.settings.heading }}</h2>
			{%- endif -%}
			{%- if section.settings.copy != blank -%}
				<div class="copy-wrapper">
					<p>{{ section.settings.copy }}</p>
				</div>
			{%- endif -%}
		</div>
		<div class="col">
			<form method="post" action="/" accept-charset="UTF-8" name="NewsletterSectionForm" id="NewsletterSectionForm" data-klaviyo-list-id="{{ section.settings.list_id }}" data-needs-validation="event" data-thank-you="{{ section.settings.thanks_copy }}" data-error-copy="{{ section.settings.error_copy }}" novalidate>
				<input type="hidden" name="$source" value="Newsletter Form">
				<div class="row gy-3 gx-lg-3">
					<div class="col-12 col-lg-6">
						<div class="form-floating">
							<input type="text" name="name" id="newsletterSectionName" class="form-control" placeholder="{{ 'contact.form.name' | t }}" aria-label="name" autocomplete="on" required>
							<label for="newsletterSectionName" class="form-label">{{ 'contact.form.name' | t }}</label>
						</div>
					</div>
					<div class="col-12 col-lg-6 form-floating">
						<div class="form-floating">
							<input type="email" name="email" id="newsletterSectionEmail" class="form-control" placeholder="{{ 'contact.form.email' | t }}" aria-label="email" autocomplete="on" required>
							<label for="newsletterSectionEmail" class="form-label">{{ 'contact.form.email' | t }}</label>
						</div>
						<div style="position: absolute; left: -5000px;" aria-hidden="true">
							<div class="form-floating">
								<input type="text" id="newsletterBots" name="bots" tabindex="-1" value="">
								<label for="newsletterBots" class="visually-hidden">Extra field</label>
							</div>
						</div>
					</div>
					{%- if section.settings.btn_label != blank -%}
						<div class="col-12">
							<button class="btn btn-primary w-100" type="submit" name="subscribe" data-klaviyo-submit data-original-copy="{{ section.settings.btn_label | escape }}">
								<span class="anim-wrapper">
									<span class="initial">{{ section.settings.btn_label }}</span>
									<span class="end">{{ section.settings.btn_label }}</span>
								</span>
							</button>
							<div class="invalid-feedback">{{ 'contact.error.email' | t }}</div>
						</div>
					{%- endif -%}
				</div>
			</form>
		</div>
	</div>
</div>
{%- endunless -%}
{% schema %}
{
	"name": "Newsletter",
	"class": "section-newsletter",
	"tag": "section",
	"settings": [
		{
			"type": "text",
			"id": "heading",
			"label": "Heading"
		},
		{
			"type": "inline_richtext",
			"id": "copy",
			"label": "Copy"
		},
		{
			"type": "header",
			"content": "Klaviyo Form Settings"
		},
		{
			"type": "text",
			"id": "list_id",
			"label": "Klaviyo List ID"
		},
		{
			"type": "text",
			"id": "btn_label",
			"label": "Button Label",
			"default": "Subscribe"
		},
		{
			"type": "text",
			"id": "thanks_copy",
			"label": "Thanks Copy",
			"default": "Thank you!",
			"info": "Message to show when email is submitted"
		},
		{
			"type": "text",
			"id": "error_copy",
			"label": "Error Copy",
			"default": "Sorry, something went wrong",
			"info": "Default error message that will show on submission error"
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"presets": [
		{
			"name": "Newsletter"
		}
	]
}
{% endschema %}