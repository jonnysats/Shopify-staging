{%- if section.blocks.size > 0 -%}
	{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
	<script src="{{ 'generic-slider.js' | asset_url }}" defer crossorigin="anonymous"></script>
	{{ 'product-inspiration.css' | asset_url | stylesheet_tag }}
	<div class="container" data-section-id="{{ section.id }}" data-section-type="genericSlider">
		<div class="row">
			{%- if section.settings.heading != blank -%}
				<div class="col-12 header-wrapper">
					<h2 class="mb-4">{{ section.settings.heading }}</h2>
				</div>
			{%- endif -%}
			<div class="col-12">
				{%- liquid
					assign flickity_arrows = false
					assign flickity_dots = false
					assign flickity_loop = false
					assign flickity_adaptive_height = true
					assign flickity_images_loaded = true
					assign flickity_contain = true
					assign flickity_group_cells = false
				-%}
				<div class="gallery-wrapper mt-1" data-generic-slider data-arrows="{{ flickity_arrows }}" data-group-cells="{{ flickity_group_cells }}" data-dots="{{ flickity_dots }}" data-loop="{{ flickity_loop }}" data-adaptive-height="{{ flickity_adaptive_height }}" data-images-loaded="{{ flickity_images_loaded }}">
					{%- liquid
						for block in section.blocks
							if block.settings.image != blank
								render 'responsive-image', image: block.settings.image, image_class: 'img-fluid', wrapper_class: 'gallery-image', wrapper_attributes: block.shopify_attributes
							endif
						endfor
					-%}
				</div>
				{%- liquid
					assign flickity_as_nav_for = '.gallery-wrapper'
					assign valid_thumb_col = 0

					comment
						check how many valid thumbnail images are
					endcomment
					for block in section.blocks
						if block.settings.image != blank
							assign valid_thumb_col = valid_thumb_col | plus: 1
						endif
					endfor

					comment
						if less than the visible amount to show, disable loop
					endcomment
					if valid_thumb_col <= 8
						assign flickity_loop = false
					endif
				-%}
				<div class="gallery-thumbnails mt-2 mt-lg-4 pt-lg-2" data-generic-nav data-contain="{{ flickity_contain }}" data-arrows="{{ flickity_arrows }}" data-dots="{{ flickity_dots }}" data-loop="{{ flickity_loop }}" data-adaptive-height="{{ flickity_adaptive_height }}" data-images-loaded="{{ flickity_images_loaded }}" data-as-nav-for="{{ flickity_as_nav_for }}">
					{%- for block in section.blocks -%}
						{%- if block.settings.image != blank -%}
							<div class="col" {{ block.shopify_attributes }}>
								{%- render 'responsive-bg-image' image: block.settings.image -%}
							</div>
						{%- endif -%}
					{%- endfor -%}
				</div>
			</div>
		</div>
	</div>
{%- endif -%}

{% schema %}
{
	"name": "Product Inspiration",
	"class": "section-product-inspiration",
	"tag": "section",
	"settings": [
		{
			"type": "header",
			"content": "Inspiration Gallery"
		},
		{
			"type": "text",
			"id": "heading",
			"label": "Heading"
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"blocks": [
		{
			"type": "gallery-item",
			"name": "Gallery Item",
			"settings": [
				{
					"type": "image_picker",
					"id": "image",
					"label": "Gallery Image"
				}
			]
		}
	],
	"presets": [
		{ "name": "Product Inspiration" }
	],
	"enabled_on": {
		"templates": ["product"]
	}
}
{% endschema %}