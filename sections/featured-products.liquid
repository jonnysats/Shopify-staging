{%- render 'section-padding', padding_amount_top: section.settings.padding_amount_top, padding_amount_bottom: section.settings.padding_amount_bottom -%}
{{ 'featured-products.css' | asset_url | stylesheet_tag: preload: true }}
{%- if section.settings.bg_color != blank -%}
	<style>
		#shopify-section-{{ section.id }} .section-wrapper { background-color: {{ section.settings.bg_color }}; }
	</style>
{%- endif -%}
{%- if section.settings.heading != blank -%}
	<div class="section-wrapper py-4 pt-lg-5 pb-lg-6">
		<div class="container pt-1 pt-lg-4" data-section-id="{{ section.id }}" data-section-type="featuredProducts">
			<div class="row pb-2 pb-lg-3 mb-3 mb-lg-1 justify-content-{{ section.settings.alignment }}">
				<div class="col col-lg-6">
					<div class="copy-wrapper pe-3 pe-lg-0 text-{{ section.settings.alignment }}">
						<h2 class="mb-lg-3">{{ section.settings.heading }}</h2>
						{%- if section.settings.subheading != blank -%}
							<div class="col{% if section.settings.alignment == "start" %} col-lg-9 pe-lg-3{% endif %}">
								<p>{{ section.settings.subheading }}</p>
							</div>
						{%- endif -%}
					</div>
				</div>
			</div>
			{%- if section.blocks.size > 0 -%}
				<div class="collection-grid gap-3 pb-2 pb-lg-4 mb-2 d-none d-lg-flex justify-content-{{ section.settings.alignment }}">
					{%- liquid
						assign tags_labels = ''
						for block in section.blocks
							if block.settings.title != blank
								assign tags_labels = tags_labels | append: block.settings.title
								unless forloop.last
									assign tags_labels = tags_labels | append: ','
								endunless
							endif
						endfor
						assign tags_array = tags_labels | split: ','
					-%}
					{%- render 'tag-label', tags: tags_array -%}
				</div>
			{%- endif -%}
			<div class="row gx-3 product-grid">
				<div class="main-product-wrapper col d-none d-lg-block">
					{%- liquid
						for product in section.settings.products
							if forloop.first
								render 'product-grid', product: product, classes: 'h-100', show_description: false, show_swatches: true
								break
							endif
						endfor
					-%}
				</div>
				<div class="col">
					<div class="row row-cols-2 gy-4 g-3 gy-lg-3 secondary-product-wrapper">
						{%- liquid
							for product in section.settings.products
								render 'product-grid', product: product, col_sm: 2, col_lg: 2, show_description: false, show_swatches: true
							endfor
						-%}
					</div>
				</div>
			</div>
		</div>
	</div>
{%- endif -%}

{% schema %}
{
	"name": "Featured Products",
	"tag": "section",
	"class": "section-featured-products",
	"settings": [
		{
			"type": "header",
			"content": "Background",
		},
		{
			"type": "color",
			"id": "bg_color",
			"label": "Overlay Color",
			"default": "#F5F5F7"
		},
		{
			"type": "header",
			"content": "Content",
		},
		{
			"type": "text",
			"id": "heading",
			"label": "Header",
		},
		{
			"type": "inline_richtext",
			"id": "subheading",
			"label": "Subheader"
		},
		{
			"type": "select",
			"id": "alignment",
			"label": "Header alignment",
			"options": [
				{
					"value": "start",
					"label": "Left"
				},
				{
					"value": "center",
					"label": "Center"
				},
				{
					"value": "end",
					"label": "Right"
				}
			],
			"default": "start"
		},
		{
			"type": "header",
			"content": "Products",
		},
		{
			"type": "product_list",
			"id": "products",
			"label": "Products",
			"limit": 5
		},
		{
			"type": "header",
			"content": "Section Settings"
		},
		{
			"type": "select",
			"id": "padding_amount_top",
			"label": "Top Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		},
		{
			"type": "select",
			"id": "padding_amount_bottom",
			"label": "Bottom Section Padding",
			"options": [
				{
					"value": "no",
					"label": "None"
				},
				{
					"value": "small",
					"label": "Small"
				},
				{
					"value": "default",
					"label": "Medium (Default)"
				},
				{
					"value": "large",
					"label": "Large"
				},
				{
					"value": "xlarge",
					"label": "Extra Large"
				}
			],
			"default": "default"
		}
	],
	"blocks": [
		{
			"type": "tag",
			"name": "Tag",
			"settings": [
				{
					"type": "text",
					"id": "title",
					"label": "Tag Label"
				}
			]
		}		
	],
	"presets": [
		{
			"name": "Featured Products"
		}
	]
}
{% endschema %}