{%- liquid
	comment
		#	NO IMAGE Fallback
		#	Works with the "no_image" theme backend setting, if this is empty, defaults to "placeholder.jpg" which should be in theme's asset folder
	endcomment
	if settings.no_image != blank
		assign image_width = settings.no_image.width | default: 900
		assign image_height = settings.no_image.height | default: 900
		assign no_image_default_aspect_ratio = image_height | divided_by: image_width
		assign no_image_aspect_ratio = settings.no_image.aspect_ratio | default: no_image_default_aspect_ratio
		assign no_image_url = settings.no_image | image_url: width: image_width, height: image_height
	else
		assign no_image_url = "placeholder.jpg" | asset_img_url: "900x900"
	endif
	comment
		Theme Settings Object
	endcomment
	
	assign active_subscriber = customer.tags | where: 'Active Subscriber'
-%}
{%- comment -%} THEME SETTINGS {%- endcomment -%}
<script>
	{%- comment -%}
	# Shopify Public CDN used by Webpack at runtime for chunks
	# REFERENCE: https://dev.to/youhan/shopify-theme-and-webpack-code-splitting-3b1p
	{%- endcomment -%}
	{%- capture theme_cdn_path -%}
		{{ 'theme.js' | asset_url }}
	{%- endcapture -%}
	{%- assign cdn_path = theme_cdn_path | split: 'theme.js' | first -%}
	window.__webpack_public_path__ = "{{ cdn_path }}";

	{%- comment -%}General Theme Settings{%- endcomment -%}
	document.documentElement.className = document.documentElement.className.replace('no-js', 'js');
	window.bluedgeusa 			= window.bluedgeusa || {};
	window.bluedgeusa.core 		= window.bluedgeusa.core || {};
	window.bluedgeusa.theme 	= window.bluedgeusa.theme || {};
	window.bluedgeusa.sections 	= window.bluedgeusa.sections || {};
	window.bluedgeusa.product 	= window.bluedgeusa.product || {};
	window.bluedgeusa.product.currentVariant = {{ product.selected_or_first_available_variant | json }};
	window.bluedgeusa.theme = {
		strings: {
			addToCart: {{ 'products.product.add_to_cart' | t | json }},
			soldOut: {{ 'products.product.sold_out' | t | json }},
			preOrder: {{ 'products.product.preorder' | t | json }},
			unavailable: {{ 'products.product.unavailable' | t | json }},
			invalidCouponCode: {{ 'cart.drawer.invalid_coupon_code' | t | json  }},
			pleaseTryAgainCoupon: {{ 'cart.drawer.please_try_again_coupon' | t | json }},
			successfulCouponCode: {{ 'cart.drawer.successful_coupon_code' | t | json }},
			coupon: {{ 'cart.drawer.coupon' | t | json }},
			got_rejected: {{ 'cart.drawer.got_rejected' | t | json }},
			applied_successfully: {{ 'cart.drawer.applied_successfully' | t | json }},
		},
		moneyFormat: {{ shop.money_format | json }},
		moneySymbol: {{ cart.currency.symbol | json }},
		noImage: {
			url: {{ no_image_url | json }},
			aspectRatio: {{ no_image_aspect_ratio | json }}
		},
		dynamicCartActive: true,
		dynamicCartUpsell: {% if settings.drawer_cart_upsell_enable == true %}true{% else %}false{% endif %},
		quickShopActive: {{ settings.quickshop_enabled }},
		currentPage: '{{ template.name | handleize }}',
		currentPageTemplate: '{{ template.suffix | handleize }}',
		domain: '{{ shop.url }}',
		storeFrontToken: '{{ settings.access_token }}',
		storeFrontApiVersion: '{{ settings.api_version }}',
		customer: {
			has_active_plan: {% if active_subscriber != blank %}true{% else %}false{% endif %}
		},
		routes: {
			rootUrl: {{ routes.root_url | json }},
			cartUrl: {{ routes.cart_url | json }},
			cartAddUrl: {{ routes.cart_add_url | json }},
			cartChangeUrl: {{ routes.cart_change_url | json }},
			cartUpdateUrl: {{ routes.cart_update_url | json }},
			searchUrl: {{ routes.search_url | json }},
			clearCart: {{ routes.cart_clear_url | json }}
		},
		newsletterApiKey: '{{ settings.public_api_key }}',
		designMode: {% if request.design_mode %}true{% else %}false{% endif %}
	};
</script>