!function(){var t={932:function(){globalThis.bluedgeusa.theme.TimeManager=class{constructor(){this.now=new Date,this.nowUTC=this.now.toISOString(),this.second=1e3,this.minute=60*this.second,this.hour=60*this.minute,this.day=24*this.hour,this.merchantTimezoneName="America/Los_Angeles",this.merchantTimezone={offset:this.utcOffset(this.merchantTimezoneName),today:(new Date).toLocaleString("en-US",{year:"numeric",month:"numeric",day:"numeric",timeZone:this.merchantTimezoneName})},this.userTimezone={offset:new Date(this.nowUTC).getTimezoneOffset(),toMerchantTimezone:null},this.timezoneDiff=this.merchantTimezone.offset-this.userTimezone.offset,this.timezoneDiffMs=1e3*this.timezoneDiff*60,this.userTimezone.toMerchantTimezone=this.now-this.timezoneDiff}utcOffset(t){const i=new Date(Date.now());i.setMilliseconds(0);const e=i.getTimezoneOffset()/60*-1,s=i.toLocaleString("en-US",{timeZone:t}),a=e+(new Date(s).getTime()-i.getTime())/1e3/60/60;return Math.abs(60*a)}}},1734:function(){"use strict";window.bluedgeusa.core.Utils=class{static debounce(t,i=400,e){let s;return function(){const a=arguments,r=e&&!s;clearTimeout(s),s=setTimeout(()=>{s=null,e||t.apply(this,a)},i),r&&t.apply(this,a)}}static formValidation(){const t=document.querySelectorAll("form[data-needs-validation]");function i(t,i){let e=!1;const s=t.currentTarget.getAttribute("data-needs-validation");i.checkValidity()?(i.classList.remove("is-invalid"),e=!0):(t.stopPropagation(),t.preventDefault(),i.classList.add("was-validated","is-invalid")),i.classList.add("was-validated"),"event"==s&&(t.stopPropagation(),t.preventDefault(),i.dispatchEvent(new CustomEvent("utils::formValidation",{detail:{validity:e}})))}t.forEach(t=>t.removeEventListener("submit",e=>i(e,t),!0)),t.forEach(t=>t.addEventListener("submit",e=>i(e,t),!0))}static scrollerTrigger(){document.querySelectorAll("[data-scroll-to]").forEach(t=>{t.addEventListener("click",t=>window.bluedgeusa.core.Utils.scroller(t))})}static scroller(t){const i="scrollBehavior"in document.documentElement.style,e=t.currentTarget.getAttribute("data-scroll-to");if(!e)return;t.preventDefault();const s=document.getElementById(e),a=window.pageYOffset+s.getBoundingClientRect().top;i?window.scrollTo({top:a,left:0,behavior:"smooth"}):window.scrollTo(0,posTop)}static rteTableWrapper(){document.querySelectorAll(".rte table").forEach(t=>{t.classList.add("table");const i=document.createElement("div");i.classList.add("table-responsive"),t.parentNode.insertBefore(i,t),i.appendChild(t)})}static rteVideoIframeWrapper(){const t=document.querySelectorAll('.rte iframe[src*="youtube.com/embed"], .rte iframe[src*="player.vimeo"]'),i=document.createElement("div");i.classList.add("ratio","ratio-16x9"),t.forEach(t=>{t.parentNode.insertBefore(i,t),i.appendChild(t)})}static buildUrlParams(t){let i=[];for(const e in t)i.push(e+"="+t[e]);return i.join("&")}static formDataToJSON(t){let i={};for(const e of t.entries())i[e[0]]=e[1];return i}static uuidGenerator(){return Math.floor(1099512676353*(1+Math.random())).toString(16).substring(1)}static scrollToTarget(t,i=0){var e=t.getBoundingClientRect().top+window.scrollY-i;return window.scrollTo({top:e,behavior:"smooth"}),!0}}}},i={};function e(s){var a=i[s];if(void 0!==a)return a.exports;var r=i[s]={exports:{}};return t[s](r,r.exports,e),r.exports}!function(){"use strict";e(1734),e(932);class t extends globalThis.bluedgeusa.theme.TimeManager{constructor(){super(),this._selectors={countdownAnchorId:"countdownAnchor",closeTimer:"#closeTimer",dataTimerDay:"[data-timer-days]",dataTimerHour:"[data-timer-hours]",dataTimerMin:"[data-timer-minutes]",dataTimerSec:"[data-timer-seconds]",productWrapper:'[data-section-type="productPerSqFt"], [data-section-type="product"]',progressBar:"[data-progress-bar]",container:'[data-section-type="countdownTimer"]'},this.countdownTimerJson=document.getElementById(this._selectors.countdownTimerJsonId),this.divAnchor=document.getElementById(this._selectors.countdownAnchorId),this.progressBar=document.querySelector(this._selectors.progressBar),this.container=document.querySelector(this._selectors.container),this.productWrapper=document.querySelector(this._selectors.productWrapper),this.closeTimer=null,this.timers=[],this.refreshSpeed=250,this.data=null,this.interval=null,this.data=null,this.e_onVariantChangeUpdateTimers=this._onVariantChangeUpdateTimers.bind(this);try{globalThis.bluedgeusa.product.countdown_timers&&this._getSelectedTimerByVariant()}catch(t){}this.data.length&&this.init()}init(){this.initTimer(),this.container.classList.add("timer-loaded"),this.productWrapper.removeEventListener("variantChange",this.e_onVariantChangeUpdateTimers),this.productWrapper.addEventListener("variantChange",this.e_onVariantChangeUpdateTimers)}initTimer(){if(!this.data.at(0))return clearInterval(this.interval),this.closeTimerSection();this.addTimerSection(),this._adjustShopifyEndTimer(),this.timers=[],this.buildTimersData(this.data.at(0));const t=this._getTimerToRun();if(!t)return clearInterval(this.interval),this.closeTimerSection();this.interval&&clearInterval(this.interval),this.startTimer(t)}_onVariantChangeUpdateTimers(t){if(!t?.detail?.variant)return!1;for(const i of globalThis.bluedgeusa.product.variant_countdown_list)i.variantId===t.detail.variant.id?i.selected=!0:i.selected=!1;this._getSelectedTimerByVariant(),this.initTimer()}_getSelectedTimerByVariant(){this.data=globalThis.bluedgeusa.product.variant_countdown_list.filter(t=>t.selected)}buildTimersData(t){const i=this._getRepeatDays(t.days),e=this._getTodayRepeatDay(i),s=this._getTimerObject(t,e,i);this._isTimerValid(s)&&this.timers.push(s)}startTimer(t){t&&(this.interval=setInterval(()=>{const i=Date.now(),e=t.endTimezone-(i-this.timezoneDiffMs),s=Math.floor(e/this.day),a=Math.floor(e%this.day/this.hour),r=Math.floor(e%this.hour/this.minute),n=Math.floor(e%this.minute/this.second);this.updateTimerDisplay(s,a,r,n),this._updateProgressBar(t.startTimezone,t.endTimezone),e<0&&(clearInterval(this.interval),this.closeTimerSection())},this.refreshSpeed))}updateTimerDisplay(t,i,e,s){const a=this.divAnchor.querySelector(this._selectors.dataTimerDay),r=this.divAnchor.querySelector(this._selectors.dataTimerHour),n=this.divAnchor.querySelector(this._selectors.dataTimerMin),o=this.divAnchor.querySelector(this._selectors.dataTimerSec);a&&r&&n&&o&&(a.innerText=t<10?"0"+t:t,r.innerText=i<10?"0"+i:i,n.innerText=e<10?"0"+e:e,o.innerText=s<10?"0"+s:s)}_updateProgressBar(t,i){if(!this.progressBar)return!1;const e=Date.now(),s=Math.max(0,i-e),a=i-t;this.progressBar.style.setProperty("--time-remaining",s),this.progressBar.style.setProperty("--total-time",a)}addTimerSection(){this.divAnchor.classList.add("timer-added")}closeTimerSection(t=!1){t&&this.divAnchor.remove(),this.divAnchor.classList.remove("timer-added")}_isTimerValid(t){return!(!t.startTimezone||!t.endTimezone)&&!(t.startTimezone>this.userTimezone.toMerchantTimezone||t.startTimezone>=t.endTimezone||this.userTimezone.toMerchantTimezone>t.endTimezone)}_getTimerObject(t,i,e){let s,a;!0===i?(s=new Date(`${this.merchantTimezone.today} ${t.startTime}`),a=new Date(`${this.merchantTimezone.today} ${t.endTime}`)):(s=new Date(`${t.startDate} ${t.startTime}`),a=new Date(`${t.endDate} ${t.endTime}`));return{startTimezone:s.getTime(),endTimezone:a.getTime(),repeatToday:i,repeatDays:e,...t}}_getRepeatDays(t){let i=[];for(let e in t)"true"===t[e]&&i.push(e);return i}_getTodayRepeatDay(t){const i=this.now.getUTCDay();return!!t.find(t=>Math.trunc(t)===i)}_getTimerToRun(){const t=this.timers.filter(t=>!1===t.repeatToday);if(t.length)return t.shift();return this.timers.filter(t=>t.repeatDays.length).shift()}augmentData(t){return t.verticalPosition="top"===t.verticalPosition?"fixed-top":"fixed-bottom",t.copyLeft=this._htmlDecode(t.copyLeft),t.copyRight=this._htmlDecode(t.copyRight),t}_htmlDecode(t){const i=document.createElement("div");return i.innerHTML=t,i.innerText}_adjustShopifyEndTimer(){this.data.map(t=>t.endTime="00:00"==t.endTime?"23:59":t.endTime)}onUnload(t){return t}onLoad(t){return t}}globalThis.bluedgeusa.theme.CountdownTimer=t,globalThis.bluedgeusa.sections.register("countdownTimer",globalThis.bluedgeusa.theme.CountdownTimer)}()}();