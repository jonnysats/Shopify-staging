!function(){"use strict";var t={2139:function(){window.bluedgeusa.theme.ProductRecommendation=class{constructor(t,i,s){this._container=t,this._id=s,this._type=i,this._selectors={productGrid:"[data-product-grid]"},this.grid=this._container.querySelector(this._selectors.productGrid),this.recommendationsUlr=`/recommendations/products?&section_id=${this._container.id}&limit=${this._container.dataset.limit}&product_id=${this._container.dataset.productId}`,this.getRecommendations()}getRecommendations(){window.bluedgeusa.core.Connect.fetch({url:this.recommendationsUlr,contentType:"text/html"},null,t=>{const i=(new DOMParser).parseFromString(t,"text/html").querySelector(this._selectors.productGrid).innerHTML;i?(this.grid.innerHTML=i,window.lazyLoadInstance.update(),document.dispatchEvent(new CustomEvent("productsInjected"))):this._container.classList.add("d-none")},t=>{this._container.classList.add("d-none")})}onLoad(t){return t}}},3091:function(){window.bluedgeusa.theme.Product=class{constructor(t,i,s){this._container=t,this._type=i,this._id=s,this._imageSize="1480",this._selectors={addToCartBtn:"[data-add-to-cart]",addToCartText:"[data-add-to-cart] [data-add-to-cart-text]",productPrice:"[data-product-price]",comparePrice:"[data-compare-price]",variantSKU:"[data-variant-sku]",priceWrapper:"[data-price-wrapper]",productImageWrapper:"[data-product-featured-image-wrapper]",productFeaturedImage:"[data-product-featured-image]",productZoomImage:"[data-product-zoom-image]",productJSON:"[data-product-json]",productThumbnails:"[data-product-thumbnails] [data-media-id]",productThumbSlider:"[data-product-thumbnails]",flickityEnabledClass:".flickity-enabled",selectedThumbnail:'.product-thumbnail .flickity-enabled [data-media-variant-id="{variantID}"]',selectedThumbAttr:"data-thumb-selected",selectedVariantThumbAttr:"data-thumb-variant-selected",sliderButtons:".flickity-button",singleOptionSelector:"[data-single-option-selector]",quantity:'[name="quantity"]',properties:'[name*="properties"]',sellingPlan:"[data-selected-selling-plan]",sellingPlansByVariant:"section.shopify_subscriptions_app_block",hiddenSellingPlanBlock:"shopify_subscriptions_app_block--hidden",subOneTimeBtn:'[data-radio-type="one_time_purchase"]',sampleAtc:"[data-product-sample-id]",sampleAtcLabel:"[data-add-to-cart-text]",boxSizeNumberTag:"[data-box-number]",totalAreaTag:"[data-area-number]",totalPrice:"[data-total-price]",noExtraSlider:"hide-extra-images",sliderLoading:"slider-loading",visibleThumbClass:"visible-cell"},this.e_addToCartHandler=this.addToCartHandler.bind(this),this.e_variantChangeHandler=this.variantChangeHandler.bind(this),this.e_setCustomOptionSelect=this.setCustomOptionSelect.bind(this),this.e_updateVariantPrice=this.updateVariantPrice.bind(this),this.e_thumbnailChange=this.thumbnailChange.bind(this),this.e_thumbnailSliderInit=this.thumbnailSliderInit.bind(this),this.e_updateMainImage=this.updateMainImage.bind(this),this.e_addToCart=this.addToCart.bind(this),this.e_addSampleToCart=this.addSampleToCart.bind(this),this.e_updateImageZoomPosition=this.updateImageZoomPosition.bind(this),this.e_realQuantityCalculationHandler=this.realQuantityCalculationHandler.bind(this),this.init()}init(){this.productDATA=JSON.parse(this._container.querySelector(this._selectors.productJSON).innerHTML),this.featuredImages=this._container.querySelectorAll(this._selectors.productFeaturedImage),this.featuredImageWrappers=this._container.querySelectorAll(this._selectors.productImageWrapper),this.zoomImage=this._container.querySelector(this._selectors.productZoomImage),this.thumbnails=this._container.querySelectorAll(this._selectors.productThumbnails),this.thumbnailSliders=this._container.querySelectorAll(this._selectors.productThumbSlider),this.addToCartBtn=this._container.querySelector(this._selectors.addToCartBtn),this.properties=this._container.querySelectorAll(this._selectors.properties),this.quantity=this._container.querySelector(this._selectors.quantity),this.singleOptionSelectors=this._container.querySelectorAll(this._selectors.singleOptionSelector),this.sampleATC=this._container.querySelector(this._selectors.sampleAtc),this.boxSizeTag=this._container.querySelector(this._selectors.boxSizeNumberTag),this.totalAreaTag=this._container.querySelector(this._selectors.totalAreaTag),this.totalPrice=this._container.querySelector(this._selectors.totalPrice),this.sellingPlan=document.querySelector(this._selectors.sellingPlan),this.sellingPlanBlocks=document.querySelectorAll(this._selectors.sellingPlansByVariant),this.oneTimeCheckboxes=document.querySelectorAll(this._selectors.subOneTimeBtn),this._options={container:this._container,enableHistoryState:"true"===this._container.dataset.enableHistoryState,singleOptionSelector:this._selectors.singleOptionSelector,productDATA:this.productDATA},this.variants=new window.bluedgeusa.core.Variants(this._options),this.isMobile=window.innerWidth<window.bluedgeusa.theme.cache.lg,this.quantityNumber=null,this.currentVariantPrice=this.variants.getCurrentVariant()?.price,this.productGalleryThumbs=[],this.triggeredAtc=!1,this.preOrderFlag="true"===this._container.dataset.preOrder,this.showOnlyVariantImages="true"===this._container.dataset.excludeExtraImages,this.clickFromVariant=!1,this.initEventListeners();const t=this.productOptionMatching();this.disableUnavailableOptions(t),this.cleanSubscriptionAppErrors(),this.realQuantityCalculationHandler()}initEventListeners(){document.removeEventListener("core:addToCart:completed",this.e_addToCartHandler),document.addEventListener("core:addToCart:completed",this.e_addToCartHandler),this._container.removeEventListener("customSelectorChange",this.e_setCustomOptionSelect),this._container.addEventListener("customSelectorChange",this.e_setCustomOptionSelect),this._container.removeEventListener("variantChange",this.e_variantChangeHandler),this._container.addEventListener("variantChange",this.e_variantChangeHandler),this._container.removeEventListener("variantPriceChange",this.e_updateVariantPrice),this._container.addEventListener("variantPriceChange",this.e_updateVariantPrice),this.thumbnails.forEach(t=>t.removeEventListener("click",this.e_thumbnailChange)),this.thumbnails.forEach(t=>t.addEventListener("click",this.e_thumbnailChange)),this.productGalleryThumbs=[],this.thumbnailSliders.forEach(t=>t.removeEventListener("GenericSlider::initSlider:ready",this.e_thumbnailSliderInit)),this.thumbnailSliders.forEach(t=>t.addEventListener("GenericSlider::initSlider:ready",this.e_thumbnailSliderInit)),this._container.removeEventListener("variantImageChange",this.e_updateMainImage),this._container.addEventListener("variantImageChange",this.e_updateMainImage),this.addToCartBtn.removeEventListener("click",this.e_addToCart),this.addToCartBtn.addEventListener("click",this.e_addToCart),this.sampleATC&&(this.sampleATC.removeEventListener("click",this.e_addSampleToCart),this.sampleATC.addEventListener("click",this.e_addSampleToCart)),this.featuredImages.length&&(this.featuredImages.forEach(t=>t.removeEventListener("load",()=>t.classList.add("loaded"))),this.featuredImages.forEach(t=>t.addEventListener("load",()=>t.classList.add("loaded")))),this.zoomImage&&(this.zoomImage.removeEventListener("mousemove",this.e_updateImageZoomPosition,!0),this.zoomImage.addEventListener("mousemove",this.e_updateImageZoomPosition,!0)),this.quantity&&(this.quantity.removeEventListener("input",this.e_realQuantityCalculationHandler),this.quantity.addEventListener("input",this.e_realQuantityCalculationHandler))}addToCartHandler(t){if(!this.triggeredAtc)return;const i=t?.target?.querySelector(".btn.loading");if(!i)return;const s=!!i.hasAttribute("data-product-sample-id");this.addToCartLoadingToggle(s),this.resetQuantity(),this.realQuantityCalculationHandler(),this.triggeredAtc=!1}async variantChangeHandler(t){this.clickFromVariant=!!t.detail.selectedID,this.addLoadingAnimToActiveSliders(),await this.waitForAnimationToEnd(),this.updateVariantSKU(t),this.updateAddToCartState(t);const i=this.validateSelectedThumbnails(t?.detail?.variant);this.setActiveThumbnail(t?.detail?.variant?.id||null,i);const s=this.productOptionMatching();if(this.disableUnavailableOptions(s),this.currentVariantPrice=t?.detail?.variant?.price,this.realQuantityCalculationHandler(),this.selectCurrentThumbnailByVariant(t?.detail?.variant?.id),!t?.detail?.selectedID){const i=this.productDATA?.options?.findIndex(t=>"color"===t.toLowerCase()||"colours"===t.toLowerCase()),e=document.getElementById(`SingleOptionSelector-${i}`);if(e){const s=t?.detail?.variant?.options[i];e.innerHTML=s,e.setAttribute("data-option-display-name",s)}this.updateVariantPrice({detail:t?.detail}),this.updateDropdownsLabel(s)}this.updateSampleMetadataOnVariantChange(t),this.changeSamplePerVariant()}updateDropdownsLabel(t){t.forEach(t=>{const i=this._container.querySelector(`[data-custom-selector="${t.index}"]`),s=i?.closest(".dropdown");if(s){const t=i.querySelector(".dropdown-item.selected"),e=s.querySelector(".form-select");if(!t&&!e)return;e.innerHTML=t.dataset.value}})}updateAddToCartState(t){const i=this._container.querySelectorAll(this._selectors.addToCartText);if(!i.length)return;let s=null;Array.isArray(window.bluedgeusa.product.variants_stock)&&(s=window.bluedgeusa.product.variants_stock.find(i=>i.id===t?.detail?.variant?.id)?.inventory_quantity);const e=globalThis.bluedgeusa.product.variants_extra_data.find(t=>t.selected);if(t.detail.variant){const h="number"==typeof s&&(this.preOrderFlag&&s<=0),a=e.preorder_label??window.bluedgeusa.theme.strings.preOrder;t.detail.variant.available?(this.addToCartBtn.disabled=!1,i.forEach(t=>{t.innerText=h?a:window.bluedgeusa.theme.strings.addToCart})):(this.addToCartBtn.disabled=!0,i.forEach(t=>{t.innerText=h?a:window.bluedgeusa.theme.strings.soldOut}))}else this.addToCartBtn.disabled=!0,i.forEach(t=>{t.innerText=window.bluedgeusa.theme.strings.unavailable})}updateVariantSKU(t){const i=this._container.querySelector(this._selectors.variantSKU);i&&t?.detail?.variant?.sku&&(i.innerHTML=t.detail.variant.sku)}updateVariantPrice(t){const i=this._container.querySelectorAll(this._selectors.productPrice),s=this._container.querySelectorAll(this._selectors.comparePrice),e=this._container.querySelectorAll(this._selectors.priceWrapper);i.forEach(i=>{i.innerHTML=window.bluedgeusa.core.Currency.formatMoney(t.detail.variant.price)}),s.length&&(s.forEach(i=>{t.detail.variant.compare_at_price?i.innerHTML=window.bluedgeusa.core.Currency.formatMoney(t.detail.variant.compare_at_price):i.innerHTML=""}),e.length&&e.forEach(i=>{t.detail.variant.compare_at_price?i.classList.add("sale"):i.classList.remove("sale")}))}async updateMainImage(t){if(!t.detail.variant||null===t.detail.variant.featured_image)return!1;await this.waitForAnimationToEnd();const i=this._container.querySelector(`${this._selectors.flickityEnabledClass} [${this._selectors.selectedThumbAttr}="true"]`);if(+i?.dataset.mediaId!==t.detail.variant.featured_media.id)return!1;const s=window.location.protocol+t.detail.variant.featured_image.src,e=window.bluedgeusa.core.Images.getSizedImageUrl(s,this._imageSize);this.updateMainImageData(e),this.updateZoomImageData(e),this.featuredImageWrappers.length&&this.featuredImageWrappers.forEach(i=>i.setAttribute("data-media-id",t.detail.variant.featured_media.id))}updateMainImageData(t){t&&this.featuredImages.length&&this.featuredImages.forEach(i=>{i.classList.remove("loaded"),i.setAttribute("data-srcset",""),i.setAttribute("srcset",""),i.src=t})}updateZoomImageData(t){t&&this.zoomImage&&(this.zoomImage.classList.remove("loaded"),this.zoomImage.setAttribute("data-srcset",""),this.zoomImage.setAttribute("srcset",""),this.zoomImage.src=t)}updateImageZoomPosition(t){const i=t.target;if(!i)return;1!==+getComputedStyle(i).getPropertyValue("--zoom")&&(i.style.setProperty("--x",100*t.offsetX/i.offsetWidth+"%"),i.style.setProperty("--y",100*t.offsetY/i.offsetHeight+"%"))}thumbnailChange(t,i=null){const s=t?.target?.dataset?.mediaVariantId??i?.dataset?.mediaVariantId;this.setActiveThumbnail(s,t?.target??i);const e=t?.target?.querySelector("a")?.getAttribute("href")??i?.querySelector("a")?.getAttribute("href");this.featuredImageWrappers.length&&this.featuredImageWrappers.forEach(i=>i.setAttribute("data-media-id",+t?.target?.dataset.mediaId)),e&&(this.selectCurrentThumbnailByVariant(s),this.updateMainImageData(e),this.updateZoomImageData(e),this.variants.updateCurrentVariant(s,t))}selectCurrentThumbnailByVariant(t){const i=this._container.querySelector(`.product-thumbnail ${this._selectors.flickityEnabledClass} [${this._selectors.selectedThumbAttr}="true"]`)??this._container.querySelector(`[data-media-variant-id="${t}"]`);if(!i)return;let s=parseInt(i?.dataset?.mediaPosition);isNaN(s)||(s-=1,this.productGalleryThumbs.forEach(t=>{const i=this._selectors.flickityEnabledClass.replace(".","");t.element.classList.contains(i)&&(this.clickFromVariant&&this.validateGallerySlidesSize(t),this.showOnlyVariantImages&&this.clickFromVariant&&this.removeLoadingAnimOnSlider(t),this.showOnlyVariantImages&&this.clickFromVariant?t.select(0,!1):t.select(s,!0))}))}thumbnailSliderInit(t){const i=t?.detail?.flickity;if(!i)return!1;this.validateGallerySlidesSize(i),this.productGalleryThumbs.push(i);const s=i.element.querySelector(`[${this._selectors.selectedThumbAttr}="true"]`);let e=parseInt(s?.dataset?.mediaPosition);if(isNaN(e))return!1;e-=1,i.select(e,!0)}addLoadingAnimToActiveSliders(){if(!this.showOnlyVariantImages||!this.clickFromVariant)return!1;this.productGalleryThumbs.forEach(t=>{const i=this._selectors.flickityEnabledClass.replace(".","");if(!t?.element?.classList?.contains(i))return!1;const s=t.element.parentElement;if(!s.classList.contains(this._selectors.noExtraSlider))return!1;s.classList.add(this._selectors.sliderLoading)})}removeLoadingAnimOnSlider(t){const i=t?.element?.parentElement;if(!i?.classList?.contains(this._selectors.noExtraSlider))return!1;i.classList.remove(this._selectors.sliderLoading)}validateGallerySlidesSize(t){if(!t)return!1;if(!this.showOnlyVariantImages)return!1;const i=t.element.querySelectorAll(`.${this._selectors.visibleThumbClass}`),s=window.innerWidth<window.bluedgeusa.theme.cache.lg?6:4;i.length<=s?(t.options.wrapAround=!1,t.options.groupCells=!0):(t.options.wrapAround=!0,t.options.groupCells=!1),t.options.cellSelector=`.${this._selectors.visibleThumbClass}`,t.reloadCells(),t.reposition(),t.resize()}waitForAnimationToEnd(){return new Promise(t=>{this.showOnlyVariantImages&&this.clickFromVariant||t(!0);const i=this._selectors.flickityEnabledClass.replace(".",""),s=this.productGalleryThumbs.find(t=>t?.element?.classList?.contains(i));s||t(!0);const e=s?.element?.parentElement;e||t(!0),e.removeEventListener("transitionend",()=>t(!0)),e.addEventListener("transitionend",()=>t(!0))})}setActiveThumbnail(t,i){if(i||(i=this._container.querySelector(this._selectors.selectedThumbnail.replaceAll("{variantID}",t))),!i)return;const s=Array.from(this.thumbnails);let e=1;s.forEach(s=>{const h=parseInt(s.dataset.mediaVariantId),a=s.closest(this._selectors.productThumbSlider),n=a.querySelector(this._selectors.flickityEnabledClass)&&a.classList.contains(this._selectors.noExtraSlider);s===i?s.setAttribute(this._selectors.selectedThumbAttr,!0):s.setAttribute(this._selectors.selectedThumbAttr,!1),h===t?(s.setAttribute(this._selectors.selectedVariantThumbAttr,!0),n&&(s.classList.add(this._selectors.visibleThumbClass),s.setAttribute("data-media-position",e),e+=1)):(s.setAttribute(this._selectors.selectedVariantThumbAttr,!1),n&&(s.classList.remove(this._selectors.visibleThumbClass),s.setAttribute("data-media-position",null)))})}validateSelectedThumbnails(t){let i=null;return document.querySelectorAll(this._selectors.selectedThumbnail.replaceAll("{variantID}",t?.id)).forEach(t=>{t.dataset.mediaId===this.featuredImageWrappers[0]?.dataset.mediaId&&(i=t)}),i}addToCart(t){this.triggeredAtc=!0,this.addToCartLoadingToggle();let i=this.quantityNumber?this.quantityNumber:this.quantity.value;i||(i=1);const s=Math.abs(parseInt(i)),e=this.variants.getCurrentVariant();this.variants.addToCart(s,e.id,this.getProperties(),this.getSellingPlan())&&t.preventDefault()}addSampleToCart(t){if(this.triggeredAtc=!0,!t?.target)return;this.sampleATC&&this.sampleATC.classList.add("loading");const i=t.target.dataset.productSampleId;if(!i)return;this.variants.addToCart(1,i)&&t.preventDefault()}updateSampleMetadataOnVariantChange(t){for(const i of globalThis.bluedgeusa.product.variants_extra_data)i.variantId===t.detail.variant.id?i.selected=!0:i.selected=!1}changeSamplePerVariant(){if(!this.sampleATC?.dataset?.changePerVariant)return!1;const t=globalThis.bluedgeusa.product.variants_extra_data.find(t=>t.selected),i=t?.sample;if(!i)return!1;const s=this.sampleATC.querySelectorAll(this._selectors.sampleAtcLabel),e=this.sampleATC.dataset.sampleLabel;s.forEach(t=>{t.innerText=e.replace("{{ price }}",i.price)}),this.sampleATC.dataset.productSampleId=i.id}getProperties(){const t={},i=/\[(.*?)]/i;return this.properties?(this.properties.forEach(s=>{const e=s.name.match(i);2===e.length&&s.value&&(t[e.pop()]=s.value)}),t):t}getSellingPlan(){if(!this.sellingPlan)return null;return this.sellingPlan.value}cleanSubscriptionAppErrors(){this.oneTimeCheckboxes&&this.oneTimeCheckboxes?.length&&this.oneTimeCheckboxes.forEach((t,i)=>t.setAttribute("id",t.id+i))}updateSubscriptionAppBlocks(t){t&&this.sellingPlanBlocks&&this.sellingPlanBlocks?.length&&this.sellingPlanBlocks.forEach(i=>{+i?.dataset?.variantId!==t?i.classList.add(this._selectors.hiddenSellingPlanBlock):i.classList.remove(this._selectors.hiddenSellingPlanBlock)})}addToCartLoadingToggle(t=!1){t?this.sampleATC.classList.toggle("loading"):this.addToCartBtn.classList.toggle("loading")}productOptionMatching(){try{const t=this.productDATA.options.map((t,i)=>({optionName:t,optionIndex:`option${i+1}`,index:i,selector:`SingleOptionSelector-${i}`,available:new Set})),i=this.variants._getCurrentOptions().map(t=>t.value),s=i.length-1,e=this.productDATA.variants.map(t=>t.options.filter(t=>"Default Title"!==t));for(let h=s;h>=0;h--)e.forEach(s=>{!0===Array.from({length:s.length},(t,i)=>i).filter(t=>t!==h).every(t=>s[t]===i[t])&&t?.[h]&&t[h].available.add(s[h])});return t.forEach(t=>{const i=[];t.available.forEach(t=>i.push(t))}),t}catch(t){return[]}}disableUnavailableOptions(t){t.forEach(t=>{const i=this._container.querySelector(`[data-custom-selector="${t.index}"]`);if(!i)return!1;const s=i.querySelectorAll("a");if(!s?.length)return!1;s.forEach(i=>{const s=i.dataset.value,e=t.available.has(s);i.setAttribute("aria-disabled",!e),e?i.parentElement.classList.remove("visually-disabled"):i.parentElement.classList.add("visually-disabled")});const e=i.dataset.optionDisplayName,h=t.available.has(i.dataset.optionDisplayName);e&&h?i.classList.remove("visually-disabled"):i.classList.add("visually-disabled")})}setCustomOptionSelect(t){const i=t.detail?.selectedValue??null,s=t.detail?.selectedIndex??null;if(!i||!s)return!1;const e=this._container.querySelector(`[data-custom-selector="${s-1}"]`),h=this._container.querySelector(`#${t.detail.selectedID}`);h&&(h.setAttribute("data-option-display-name",i),h.innerText=i),e.querySelectorAll(this._selectors.singleOptionSelector).forEach(t=>{const s=t.dataset.value;s&&s===i?(t.classList.add("selected","active"),t.dataset.selected=!0):(t.classList.remove("selected","active"),t.dataset.selected=!1)}),"BUTTON"===e.previousElementSibling.tagName&&(e.previousElementSibling.innerHTML=`<span>${i}</span>`)}realQuantityCalculationHandler(){this.quantity?.value?.length&&(+this.quantity?.value<=0&&this.resetQuantity(),this.updateTotalPriceTag())}updateTotalPriceTag(){if(!this.totalPrice)return;const t=this.quantityNumber?this.quantityNumber*(this.currentVariantPrice/100):+this.quantity?.value*(this.currentVariantPrice/100);this.totalPrice&&(this.totalPrice.innerHTML=window.bluedgeusa.core.Currency.formatMoney(100*t))}resetQuantity(){this.quantity.value=1}onLoad(t){return window.lazyLoadInstance.update(),t}onUnload(t){return document.removeEventListener("core:addToCart:completed",this.e_addToCartHandler),this._container.removeEventListener("customSelectorChange",this.e_setCustomOptionSelect),this._container.removeEventListener("variantChange",this.e_variantChangeHandler),this._container.removeEventListener("variantPriceChange",this.e_updateVariantPrice),this._container.removeEventListener("variantImageChange",this.e_updateMainImage),this.addToCartBtn.removeEventListener("click",this.e_addToCart),this.featuredImages.length&&this.featuredImages.forEach(t=>t.removeEventListener("load",()=>t.classList.add("loaded"))),this.zoomImage&&this.zoomImage.removeEventListener("mousemove",this.e_updateImageZoomPosition,!0),t}}}},i={};function s(e){var h=i[e];if(void 0!==h)return h.exports;var a=i[e]={exports:{}};return t[e](a,a.exports,s),a.exports}s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,{a:i}),i},s.d=function(t,i){for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)};s(3091),s(2139);window.bluedgeusa.sections.register("genericSlider",window.bluedgeusa.theme.GenericSlider),window.bluedgeusa.sections.register("product",window.bluedgeusa.theme.Product),window.bluedgeusa.sections.register("productRecommendations",window.bluedgeusa.theme.ProductRecommendation)}();